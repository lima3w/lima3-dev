<!doctype html><html lang=en><head><title>· My New Hugo Site
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Zack Lewis"><meta name=description content="They (the all knowing vendors who want to sell you more hardware for storage, software for backups, etc) always say you should follow the 3-2-1 rule for backups. I&rsquo;ve never been good at this. So I set out on a mission. I wanted a backup system that was easy to deploy to my new servers and worked without a bunch of manual intervention. I built a simple web server that houses 2 scripts."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="My New Hugo Site"><meta name=twitter:description content="They (the all knowing vendors who want to sell you more hardware for storage, software for backups, etc) always say you should follow the 3-2-1 rule for backups. I’ve never been good at this. So I set out on a mission. I wanted a backup system that was easy to deploy to my new servers and worked without a bunch of manual intervention. I built a simple web server that houses 2 scripts."><meta property="og:url" content="/blog/backups-of-backups-of-backups..../"><meta property="og:site_name" content="My New Hugo Site"><meta property="og:title" content="My New Hugo Site"><meta property="og:description" content="They (the all knowing vendors who want to sell you more hardware for storage, software for backups, etc) always say you should follow the 3-2-1 rule for backups. I’ve never been good at this. So I set out on a mission. I wanted a backup system that was easy to deploy to my new servers and worked without a bunch of manual intervention. I built a simple web server that houses 2 scripts."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><link rel=canonical href=/blog/backups-of-backups-of-backups..../><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.7763f8bc6341ecf82378e867c285e1549abb063a899be313ccd25dbfcd24fa7d.css integrity="sha256-d2P4vGNB7PgjeOhnwoXhVJq7BjqJm+MTzNJdv80k+n0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/img/favicon.svg sizes=any><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>My New Hugo Site
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=/blog/backups-of-backups-of-backups..../></a></h1></header><p>They (the all knowing vendors who want to sell you more hardware for storage, software for backups, etc) always say you should follow the 3-2-1 rule for backups. I&rsquo;ve never been good at this. So I set out on a mission. I wanted a backup system that was easy to deploy to my new servers and worked without a bunch of manual intervention. I built a simple web server that houses 2 scripts. Install and run-backups. The install script will install the required components like wget, restic, autofs, etc. And it would configure these to create a mount point on my Unraid server in a backups directory with the hostname as the final folder. It would create a healthcheck.io type check on my selfhosted version of healthcheck. It would then pull down the run-backup script and create a cron job to run nightly using restic. If the job fails, it pings my ntfy server. If it doesn&rsquo;t run, healthchecks pings me after 24 hours. This all works well. I can even install the entire system with a simple command:</p><pre tabindex=0><code>curl http://backups.lab/install.sh | bash
</code></pre><p>Once this runs, it&rsquo;s done. I normally kick off the first one manually. It backs up /root, /data, /opt, and /home. This is where all of my installs take place.</p><p>Now on to the 1 of 3-2-1. Offsite. I installed a docker container of duplicacy that connects to my cloud storage of choice. I have 2TB available, so space isn&rsquo;t an issue. This software takes my entire backups share from unraid and uploads in, encrypted, to cloud storage. Initial space was only 25GB used. I was thoroughly surprised. But it&rsquo;s done. I am able to restore directly from the cloud storage with no additional cost. I&rsquo;m sure the cloud vendors have redundant systems in place. And even if someone were able to get in, they&rsquo;d have to set up duplicacy with the right encryption key phrase. So it&rsquo;s secure.</p><p>The one issue was odd in that it showed a permission denied when attempting to set up the cloud provider. The fix was to go into the docker container and delete the executable, then restart the container. It did not properly set the executable flag in permissions.</p></article></section></div><footer class=footer><section class=container>©
2007 -
2025
Zack Lewis
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>